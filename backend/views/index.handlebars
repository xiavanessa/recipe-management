<main>
  <!-- Function Bar -->
  <div class="container-fluid row function-bar">
    <div class="col-md-offset-3 col-md-6">
      <div class="input-group text-center">
        <input
          type="text"
          class="form-control"
          placeholder="Search recipes..."
        />
        <span class="input-group-btn">
          <button class="btn btn-default" type="button">SEARCH</button>
        </span>
      </div>
    </div>
    <div class="col-md-3 text-right">
      <!-- Add Recipe Modal -->
      <div
        class="modal fade"
        id="addRecipeModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="addRecipeModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addRecipeModalLabel">Add New Recipe</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form id="addRecipeForm">
              <div class="modal-body">
                <div class="form-group">
                  <label for="recipeName">Name</label>
                  <input
                    type="text"
                    class="form-control"
                    id="recipeName"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="recipeDescription">Description</label>
                  <textarea
                    class="form-control"
                    id="recipeDescription"
                    required
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="recipeIngredients">Ingredients (comma-separated)</label>
                  <input
                    type="text"
                    class="form-control"
                    id="recipeIngredients"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="recipeInstructions">Instructions</label>
                  <textarea
                    class="form-control"
                    id="recipeInstructions"
                    required
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="recipeImage">Image URL (optional)</label>
                  <input type="text" class="form-control" id="recipeImage" />
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-dismiss="modal"
                >Cancel</button>
                <button type="submit" class="btn btn-primary">Add Recipe</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Modify the ADD RECIPE button to trigger the modal -->
      <button
        class="btn btn-primary"
        title="Add Recipe"
        data-toggle="modal"
        data-target="#addRecipeModal"
      >
        <span class="glyphicon glyphicon-edit"></span>
        ADD RECIPE
      </button>

      <button class="btn btn-primary" title="Favorite Recipe">
        <span class="glyphicon glyphicon-bookmark"></span>
        BOOKMARKS
      </button>
    </div>
  </div>

  <div class="container-fluid">
    <!-- Recipe List left -->
    <div class="recipe-list col-md-3">
      <ul>
        {{#each recipes}}
          <li class="preview">
            <a class="preview__link" href="/api/recipe/{{this._id}}">
              <div class="preview__data">
                <h4 class="preview__title">{{this.name}}</h4>
                <p class="preview__description">{{this.description}}</p>
              </div>
            </a>
          </li>
        {{/each}}
      </ul>

      <!-- Pagination Controls -->
      <div class="pagination">
        {{#if (gt currentPage 1)}}
          <a
            href="?page={{sub currentPage 1}}"
            class="btn btn-secondary"
          >Previous</a>
        {{/if}}

        <span>Page {{currentPage}} of {{totalPages}}</span>

        {{#if (lt currentPage totalPages)}}
          <a
            href="?page={{add currentPage 1}}"
            class="btn btn-secondary"
          >Next</a>
        {{/if}}
      </div>
    </div>

    <!-- Recipe Details right -->
    <div class="recipe-details col-md-9">
      {{#if selectedRecipe}}
        <div class="recipe-details__header">
          <h1 class="text-center">{{selectedRecipe.name}}</h1>
          <p class="text-center">{{selectedRecipe.description}}</p>
        </div>
        <img
          src="{{selectedRecipe.image}}"
          alt="{{selectedRecipe.name}}"
          class="img-fluid"
        />

        <h4>Ingredients:</h4>
        <ul>
          {{#each selectedRecipe.ingredients}}
            <li>{{this}}</li>
          {{/each}}
        </ul>

        <h4>Instructions:</h4>
        <p>{{selectedRecipe.instructions}}</p>
      {{else}}
        <p class="text-center">Select a recipe to view its details.</p>
      {{/if}}
    </div>
  </div>
</main>